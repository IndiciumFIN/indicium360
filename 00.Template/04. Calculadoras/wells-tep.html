<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escore de Wells para TEP (Tromboembolismo Pulmonar) - Enfermagem Pr√°tica</title>
    <meta name="description" content="Calculadora do Escore de Wells para avalia√ß√£o de probabilidade de Tromboembolismo Pulmonar (TEP). Estratifique o risco e determine a necessidade de investiga√ß√£o complementar.">
    <meta name="keywords" content="Wells TEP, tromboembolismo pulmonar, embolia pulmonar, escore wells, TEP, D-d√≠mero, diagn√≥stico TEP, probabilidade cl√≠nica">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- jsPDF para gera√ß√£o de PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- VLibras -->    <!-- Google Analytics com Consent Mode V2 -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied',
            'functionality_storage': 'denied',
            'personalization_storage': 'denied',
            'security_storage': 'granted',
            'wait_for_update': 500
        });
        
        gtag('js', new Date());
        gtag('config', 'G-8FLJ59XXDK');
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8FLJ59XXDK"></script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6472730056006847" crossorigin="anonymous"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header ser√° injetado aqui -->
    <div id="header-placeholder"></div>

    <!-- Modal de Feedback -->
    <div id="feedbackModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-sm mx-4 transform transition-all">
            <div id="modalContent" class="text-center"></div>
            <button onclick="fecharModal()" class="mt-4 w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">
                Fechar
            </button>
        </div>
    </div>

    <!-- Conte√∫do Principal -->
    <main class="container mx-auto px-4 py-8 mt-20">
        <div class="max-w-7xl mx-auto">
            
            <!-- T√≠tulo e Descri√ß√£o -->
            <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                <h1 class="text-3xl font-bold mb-4" style="color: #1A3E74;">
                    Escore de Wells para TEP (Tromboembolismo Pulmonar)
                </h1>
                <p class="text-gray-700 leading-relaxed">
                    O <strong>Escore de Wells para TEP</strong> √© uma ferramenta validada para estimar a probabilidade 
                    cl√≠nica de <strong>Tromboembolismo Pulmonar</strong> em pacientes com suspeita diagn√≥stica. Auxilia na 
                    tomada de decis√£o sobre investiga√ß√£o complementar (D-d√≠mero, angiotomografia de t√≥rax), permitindo 
                    estratifica√ß√£o de risco e abordagem diagn√≥stica racional.
                </p>
            </div>

            <!-- Grid Principal: 2 colunas + sidebar -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                
                <!-- Coluna 1: Crit√©rios de Wells -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-xl font-semibold mb-4" style="color: #1A3E74;">
                        üìã Crit√©rios de Wells para TEP
                    </h2>
                    
                    <div class="space-y-3">
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="sinaisTvp" class="mt-1 mr-3 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500" data-pontos="3">
                                <span class="text-sm">
                                    <strong>Sinais cl√≠nicos de TVP</strong> <span class="text-blue-600 font-semibold">(+3)</span><br>
                                    <span class="text-xs text-gray-600">(Edema, dor, empastamento em panturrilha)</span>
                                </span>
                            </label>
                        </div>
                        
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="tepMaisProvavel" class="mt-1 mr-3 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500" data-pontos="3">
                                <span class="text-sm">
                                    <strong>TEP √© o diagn√≥stico mais prov√°vel</strong> <span class="text-blue-600 font-semibold">(+3)</span><br>
                                    <span class="text-xs text-gray-600">(N√£o h√° outra explica√ß√£o alternativa)</span>
                                </span>
                            </label>
                        </div>
                        
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="taquicardia" class="mt-1 mr-3 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500" data-pontos="1.5">
                                <span class="text-sm">
                                    <strong>FC > 100 bpm</strong> <span class="text-blue-600 font-semibold">(+1,5)</span><br>
                                    <span class="text-xs text-gray-600">(Taquicardia)</span>
                                </span>
                            </label>
                        </div>
                        
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="imobilizacao" class="mt-1 mr-3 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500" data-pontos="1.5">
                                <span class="text-sm">
                                    <strong>Imobiliza√ß√£o ‚â• 3 dias ou cirurgia recente</strong> <span class="text-blue-600 font-semibold">(+1,5)</span><br>
                                    <span class="text-xs text-gray-600">(√öltimas 4 semanas)</span>
                                </span>
                            </label>
                        </div>
                        
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="historiaPrevia" class="mt-1 mr-3 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500" data-pontos="1.5">
                                <span class="text-sm">
                                    <strong>Hist√≥ria pr√©via de TVP ou TEP</strong> <span class="text-blue-600 font-semibold">(+1,5)</span>
                                </span>
                            </label>
                        </div>
                        
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="hemoptise" class="mt-1 mr-3 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500" data-pontos="1">
                                <span class="text-sm">
                                    <strong>Hemoptise</strong> <span class="text-blue-600 font-semibold">(+1)</span><br>
                                    <span class="text-xs text-gray-600">(Sangue no escarro)</span>
                                </span>
                            </label>
                        </div>
                        
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" id="cancer" class="mt-1 mr-3 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500" data-pontos="1">
                                <span class="text-sm">
                                    <strong>C√¢ncer ativo</strong> <span class="text-blue-600 font-semibold">(+1)</span><br>
                                    <span class="text-xs text-gray-600">(Tratamento atual ou √∫ltimos 6 meses)</span>
                                </span>
                            </label>
                        </div>
                    </div>
                    
                    <button 
                        onclick="calcularWellsTEP()" 
                        class="w-full mt-6 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 transition duration-300 shadow-md"
                    >
                        Calcular Escore de Wells
                    </button>
                    
                    <button 
                        onclick="limparFormulario()" 
                        class="w-full mt-3 bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-lg hover:bg-gray-300 transition duration-300"
                    >
                        Limpar
                    </button>
                </div>

                <!-- Coluna 2: Resultados -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-xl font-semibold mb-4" style="color: #1A3E74;">
                        üìä Resultado
                    </h2>
                    
                    <div id="resultado" class="text-center py-8 text-gray-400">
                        Marque os crit√©rios presentes para calcular o escore de Wells
                    </div>
                    
                    <div id="probabilidade" class="mt-6 hidden">
                        <h3 class="font-semibold text-gray-800 mb-3">Probabilidade Cl√≠nica de TEP</h3>
                        <div id="probabilidadeConteudo" class="text-sm text-gray-700"></div>
                    </div>
                    
                    <div id="conduta" class="mt-6 hidden">
                        <h3 class="font-semibold text-gray-800 mb-3">Conduta Diagn√≥stica</h3>
                        <div id="condutaConteudo" class="text-sm text-gray-700 space-y-2"></div>
                    </div>

                    <!-- Bot√µes de A√ß√£o -->
                    <div id="botoesAcao" class="hidden flex gap-3 mt-6">
                        <button onclick="copiarResultado()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300 text-sm font-medium flex items-center justify-center gap-2">
                            <span>üìã</span>
                            <span>Copiar Resultados</span>
                        </button>
                        <button onclick="exportarPDF()" class="flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition duration-300 text-sm font-medium flex items-center justify-center gap-2">
                            <span>üìÑ</span>
                            <span>Exportar PDF</span>
                        </button>
                    </div>
                </div>

                <!-- Coluna 3: Informa√ß√µes Adicionais -->
                <div class="space-y-6">
                    <!-- Interpreta√ß√£o -->
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-3" style="color: #1A3E74;">
                            üìä Interpreta√ß√£o do Escore
                        </h3>
                        <div class="space-y-2 text-xs">
                            <div class="p-2 bg-green-100 rounded border-l-4 border-green-500">
                                <p class="font-semibold text-green-800">< 2 pontos: BAIXA probabilidade</p>
                                <p class="text-green-700">TEP improv√°vel (~10%)</p>
                            </div>
                            <div class="p-2 bg-yellow-100 rounded border-l-4 border-yellow-500">
                                <p class="font-semibold text-yellow-800">2-6 pontos: MODERADA probabilidade</p>
                                <p class="text-yellow-700">TEP poss√≠vel (~30%)</p>
                            </div>
                            <div class="p-2 bg-red-100 rounded border-l-4 border-red-500">
                                <p class="font-semibold text-red-800">> 6 pontos: ALTA probabilidade</p>
                                <p class="text-red-700">TEP prov√°vel (~65%)</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sinais e Sintomas -->
                    <div class="bg-gradient-to-br from-red-50 to-pink-50 rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-3" style="color: #1A3E74;">
                            ü©∫ Manifesta√ß√µes Cl√≠nicas do TEP
                        </h3>
                        <ul class="text-xs text-gray-700 space-y-2">
                            <li class="flex items-start">
                                <span class="text-red-600 mr-2">‚Ä¢</span>
                                <span><strong>Dispneia s√∫bita</strong> (mais comum)</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-red-600 mr-2">‚Ä¢</span>
                                <span><strong>Dor tor√°cica pleur√≠tica</strong></span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-red-600 mr-2">‚Ä¢</span>
                                <span><strong>Taquicardia</strong> (FC > 100bpm)</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-red-600 mr-2">‚Ä¢</span>
                                <span><strong>Hemoptise</strong> (raro, mas espec√≠fico)</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-red-600 mr-2">‚Ä¢</span>
                                <span><strong>S√≠ncope</strong> (TEP maci√ßo)</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-red-600 mr-2">‚Ä¢</span>
                                <span><strong>Taquipneia</strong> (FR > 20irpm)</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-red-600 mr-2">‚Ä¢</span>
                                <span><strong>Hipoxemia</strong> (SatO‚ÇÇ < 90%)</span>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Fatores de Risco -->
                    <div class="bg-gradient-to-br from-amber-50 to-yellow-50 rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-3" style="color: #1A3E74;">
                            ‚ö†Ô∏è Fatores de Risco para TEP
                        </h3>
                        <ul class="text-xs text-gray-700 space-y-1">
                            <li class="flex items-start">
                                <span class="text-amber-600 mr-2">‚Ä¢</span>
                                <span>Cirurgia ortop√©dica (pr√≥tese quadril/joelho)</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-amber-600 mr-2">‚Ä¢</span>
                                <span>Imobiliza√ß√£o prolongada</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-amber-600 mr-2">‚Ä¢</span>
                                <span>C√¢ncer ativo</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-amber-600 mr-2">‚Ä¢</span>
                                <span>TVP pr√©via ou TEP pr√©vio</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-amber-600 mr-2">‚Ä¢</span>
                                <span>Trombofilias heredit√°rias</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-amber-600 mr-2">‚Ä¢</span>
                                <span>Anticoncepcionais orais</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-amber-600 mr-2">‚Ä¢</span>
                                <span>Gesta√ß√£o e puerp√©rio</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-amber-600 mr-2">‚Ä¢</span>
                                <span>Insufici√™ncia card√≠aca</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Informa√ß√µes Cient√≠ficas -->
            <div class="mt-6 bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4" style="color: #1A3E74;">
                    üìö Fundamenta√ß√£o Cient√≠fica e Conduta
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-700">
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-2">Algoritmo Diagn√≥stico</h3>
                        <ul class="space-y-1 text-xs">
                            <li>‚Ä¢ <strong>Baixa probabilidade:</strong> D-d√≠mero</li>
                            <li>&nbsp;&nbsp;- Se negativo: TEP exclu√≠do</li>
                            <li>&nbsp;&nbsp;- Se positivo: AngioTC t√≥rax</li>
                            <li>‚Ä¢ <strong>Moderada probabilidade:</strong> D-d√≠mero</li>
                            <li>&nbsp;&nbsp;- Se negativo: TEP improv√°vel</li>
                            <li>&nbsp;&nbsp;- Se positivo: AngioTC t√≥rax</li>
                            <li>‚Ä¢ <strong>Alta probabilidade:</strong> AngioTC direto</li>
                            <li>&nbsp;&nbsp;- N√£o aguardar D-d√≠mero</li>
                            <li>&nbsp;&nbsp;- Considerar anticoagula√ß√£o emp√≠rica</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-2">Tratamento do TEP</h3>
                        <ul class="space-y-1 text-xs">
                            <li>‚Ä¢ <strong>Anticoagula√ß√£o imediata</strong> se alta probabilidade</li>
                            <li>‚Ä¢ Heparina n√£o fracionada (TEP maci√ßo)</li>
                            <li>‚Ä¢ HBPM (enoxaparina 1mg/kg 12/12h)</li>
                            <li>‚Ä¢ Rivaroxabana 15mg 12/12h (15 dias)</li>
                            <li>‚Ä¢ Apixabana 10mg 12/12h (7 dias)</li>
                            <li>‚Ä¢ Tromb√≥lise se instabilidade hemodin√¢mica</li>
                            <li>‚Ä¢ Embolectomia se contraindica√ß√£o trombol√≠tico</li>
                            <li>‚Ä¢ Anticoagula√ß√£o por 3-6 meses (m√≠nimo)</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-2">Cuidados de Enfermagem</h3>
                        <ul class="space-y-1 text-xs">
                            <li>‚Ä¢ Oxigenoterapia (manter SatO‚ÇÇ > 92%)</li>
                            <li>‚Ä¢ Monitorizar sinais vitais (PA, FC, FR, SatO‚ÇÇ)</li>
                            <li>‚Ä¢ Repouso no leito inicialmente</li>
                            <li>‚Ä¢ Observar sinais de instabilidade hemodin√¢mica</li>
                            <li>‚Ä¢ Atentar para sangramentos (anticoagula√ß√£o)</li>
                            <li>‚Ä¢ Controle rigoroso de TTPa ou anti-Xa</li>
                            <li>‚Ä¢ Educa√ß√£o sobre sinais de alerta</li>
                            <li>‚Ä¢ Suporte emocional (diagn√≥stico grave)</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer ser√° injetado aqui -->
    <div id="footer-placeholder"></div>

    <!-- VLibras Widget -->
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>    <!-- Scripts -->
    <script src="../00.Template/assets/js/config.js"></script>
    <script>
        // Inicializa Google Analytics
        if (typeof CONFIG !== 'undefined') {
            CONFIG.initGoogleAnalytics();
        }
    </script>
    <script>
        // Vari√°veis globais para armazenar resultados
        let ultimoPontos = 0;
        let ultimaClassificacao = '';
        let ultimaPrevalencia = '';

        // Injetar Header e Footer
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof injectHeader === 'function') injectHeader();
            if (typeof injectFooter === 'function') injectFooter();
        });

        // Fun√ß√£o para calcular escore de Wells para TEP
        function calcularWellsTEP() {
            let pontos = 0;
            
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    pontos += parseFloat(checkbox.dataset.pontos);
                }
            });
            
            exibirResultado(pontos);
        }
        
        function exibirResultado(pontos) {
            const resultadoDiv = document.getElementById('resultado');
            const probabilidadeDiv = document.getElementById('probabilidade');
            const condutaDiv = document.getElementById('conduta');
            const probabilidadeConteudo = document.getElementById('probabilidadeConteudo');
            const condutaConteudo = document.getElementById('condutaConteudo');
            const botoesAcao = document.getElementById('botoesAcao');
            
            // Classificar probabilidade
            let classificacao = '';
            let descricao = '';
            let prevalencia = '';
            let cor = '';
            
            if (pontos < 2) {
                classificacao = 'BAIXA PROBABILIDADE';
                descricao = 'TEP improv√°vel';
                prevalencia = '~10%';
                cor = '#10B981'; // Verde
            } else if (pontos <= 6) {
                classificacao = 'PROBABILIDADE MODERADA';
                descricao = 'TEP poss√≠vel';
                prevalencia = '~30%';
                cor = '#EAB308'; // Amarelo
            } else {
                classificacao = 'ALTA PROBABILIDADE';
                descricao = 'TEP prov√°vel';
                prevalencia = '~65%';
                cor = '#EF4444'; // Vermelho
            }

            // Armazenar valores globais
            ultimoPontos = pontos;
            ultimaClassificacao = classificacao;
            ultimaPrevalencia = prevalencia;
            
            // Resultado principal
            resultadoDiv.innerHTML = `
                <div class="bg-gradient-to-br from-red-50 to-pink-50 rounded-lg p-6">
                    <p class="text-sm text-gray-600 mb-2">Escore de Wells para TEP</p>
                    <p class="text-5xl font-bold mb-2" style="color: #1A3E74;">
                        ${pontos.toFixed(1)} <span class="text-xl">pontos</span>
                    </p>
                    <div class="mt-4 p-4 rounded-lg" style="background-color: ${cor}20; border: 2px solid ${cor};">
                        <p class="text-lg font-bold" style="color: ${cor};">
                            ${classificacao}
                        </p>
                        <p class="text-sm mt-1" style="color: ${cor};">
                            ${descricao} (Preval√™ncia: ${prevalencia})
                        </p>
                    </div>
                </div>
            `;
            
            // Probabilidade detalhada
            probabilidadeConteudo.innerHTML = `
                <div class="p-4 rounded-lg" style="background-color: ${cor}15; border-left: 4px solid ${cor};">
                    <p class="font-semibold text-gray-800 mb-2">Risco de TEP:</p>
                    <div class="space-y-1 text-xs">
                        <p><strong>Preval√™ncia estimada:</strong> ${prevalencia}</p>
                        <p><strong>Probabilidade pr√©-teste:</strong> ${pontos < 2 ? 'Baixa' : pontos <= 6 ? 'Moderada' : 'Alta'}</p>
                        <p><strong>Necessidade de investiga√ß√£o:</strong> ${pontos < 2 ? 'D-d√≠mero' : pontos <= 6 ? 'D-d√≠mero' : 'AngioTC direta'}</p>
                    </div>
                </div>
            `;
            
            // Conduta baseada na probabilidade
            let condutaHTML = '';
            
            if (pontos < 2) {
                condutaHTML = `
                    <div class="p-3 bg-green-50 border-l-4 border-green-500 rounded">
                        <p class="font-semibold text-green-800">‚úì Baixa Probabilidade - Solicitar D-d√≠mero</p>
                        <ul class="text-green-700 text-xs mt-2 space-y-1">
                            <li>‚Ä¢ <strong>1¬™ etapa: Solicitar D-d√≠mero</strong></li>
                            <li>‚Ä¢ Se D-d√≠mero <strong>NEGATIVO</strong> (< 500 ng/mL):</li>
                            <li>&nbsp;&nbsp;‚Üí <strong>TEP EXCLU√çDO</strong> com seguran√ßa</li>
                            <li>&nbsp;&nbsp;‚Üí N√£o necessita investiga√ß√£o adicional</li>
                            <li>&nbsp;&nbsp;‚Üí Buscar diagn√≥sticos alternativos</li>
                            <li>‚Ä¢ Se D-d√≠mero <strong>POSITIVO</strong> (‚â• 500 ng/mL):</li>
                            <li>&nbsp;&nbsp;‚Üí Solicitar <strong>AngioTC de t√≥rax</strong></li>
                            <li>&nbsp;&nbsp;‚Üí Considerar anticoagula√ß√£o emp√≠rica se inst√°vel</li>
                            <li>‚Ä¢ Manter oxigenoterapia (SatO‚ÇÇ > 92%)</li>
                            <li>‚Ä¢ Reavalia√ß√£o cl√≠nica cont√≠nua</li>
                        </ul>
                    </div>
                `;
            } else if (pontos <= 6) {
                condutaHTML = `
                    <div class="p-3 bg-yellow-50 border-l-4 border-yellow-500 rounded">
                        <p class="font-semibold text-yellow-800">‚ö†Ô∏è Probabilidade Moderada - Investigar</p>
                        <ul class="text-yellow-700 text-xs mt-2 space-y-1">
                            <li>‚Ä¢ <strong>1¬™ etapa: Solicitar D-d√≠mero</strong></li>
                            <li>‚Ä¢ Se D-d√≠mero <strong>NEGATIVO</strong>:</li>
                            <li>&nbsp;&nbsp;‚Üí TEP improv√°vel (mas n√£o totalmente exclu√≠do)</li>
                            <li>&nbsp;&nbsp;‚Üí Observa√ß√£o cl√≠nica e reavalia√ß√£o</li>
                            <li>‚Ä¢ Se D-d√≠mero <strong>POSITIVO</strong>:</li>
                            <li>&nbsp;&nbsp;‚Üí <strong>AngioTC de t√≥rax OBRIGAT√ìRIA</strong></li>
                            <li>&nbsp;&nbsp;‚Üí Considerar anticoagula√ß√£o emp√≠rica se:</li>
                            <li>&nbsp;&nbsp;&nbsp;&nbsp;- Instabilidade hemodin√¢mica</li>
                            <li>&nbsp;&nbsp;&nbsp;&nbsp;- Demora para AngioTC > 4h</li>
                            <li>‚Ä¢ <strong>Anticoagula√ß√£o emp√≠rica:</strong></li>
                            <li>&nbsp;&nbsp;- Enoxaparina 1mg/kg SC 12/12h, OU</li>
                            <li>&nbsp;&nbsp;- Rivaroxabana 15mg VO 12/12h</li>
                            <li>‚Ä¢ Oxigenoterapia + monitoriza√ß√£o cont√≠nua</li>
                        </ul>
                    </div>
                `;
            } else {
                condutaHTML = `
                    <div class="p-3 bg-red-50 border-l-4 border-red-700 rounded">
                        <p class="font-semibold text-red-900">üö® Alta Probabilidade - URG√äNCIA</p>
                        <ul class="text-red-800 text-xs mt-2 space-y-1">
                            <li>‚Ä¢ <strong>N√ÉO AGUARDAR D-d√≠mero</strong></li>
                            <li>‚Ä¢ <strong>INICIAR ANTICOAGULA√á√ÉO IMEDIATAMENTE</strong></li>
                            <li>‚Ä¢ <strong>Solicitar AngioTC de t√≥rax URGENTE</strong></li>
                            <li>‚Ä¢ <strong>Anticoagula√ß√£o inicial (escolher uma):</strong></li>
                            <li>&nbsp;&nbsp;- Heparina NF 80 UI/kg bolus + 18 UI/kg/h (se inst√°vel)</li>
                            <li>&nbsp;&nbsp;- Enoxaparina 1mg/kg SC 12/12h (se est√°vel)</li>
                            <li>&nbsp;&nbsp;- Rivaroxabana 15mg VO 12/12h</li>
                            <li>‚Ä¢ <strong>Se instabilidade hemodin√¢mica (TEP maci√ßo):</strong></li>
                            <li>&nbsp;&nbsp;‚Üí Considerar <strong>TROMB√ìLISE</strong> (Alteplase 100mg EV 2h)</li>
                            <li>&nbsp;&nbsp;‚Üí Transferir para UTI</li>
                            <li>&nbsp;&nbsp;‚Üí Suporte inotr√≥pico se necess√°rio</li>
                            <li>‚Ä¢ Oxigenoterapia (manter SatO‚ÇÇ > 92%)</li>
                            <li>‚Ä¢ Monitoriza√ß√£o hemodin√¢mica rigorosa</li>
                            <li>‚Ä¢ ECG (afastar sobrecarga VD: S1Q3T3)</li>
                        </ul>
                    </div>
                `;
            }
            
            // Adicionar orienta√ß√µes gerais
            condutaHTML += `
                <div class="p-3 bg-blue-50 border-l-4 border-blue-500 rounded mt-2">
                    <p class="font-semibold text-blue-800">üìä Exames Complementares</p>
                    <ul class="text-blue-700 text-xs mt-1 space-y-1">
                        <li>‚Ä¢ <strong>D-d√≠mero:</strong> VPN 95% se < 500 ng/mL (baixa probabilidade)</li>
                        <li>‚Ä¢ <strong>AngioTC t√≥rax:</strong> Padr√£o-ouro (sensibilidade 90-95%)</li>
                        <li>‚Ä¢ <strong>ECG:</strong> S1Q3T3 (sobrecarga VD), taquicardia sinusal</li>
                        <li>‚Ä¢ <strong>Gasometria:</strong> Hipoxemia, alcalose respirat√≥ria</li>
                        <li>‚Ä¢ <strong>Troponina/BNP:</strong> Elevados em disfun√ß√£o VD</li>
                        <li>‚Ä¢ <strong>Ecocardiograma:</strong> Avaliar fun√ß√£o VD (TEP maci√ßo)</li>
                    </ul>
                </div>
            `;
            
            condutaConteudo.innerHTML = condutaHTML;
            probabilidadeDiv.classList.remove('hidden');
            condutaDiv.classList.remove('hidden');
            botoesAcao.classList.remove('hidden');
        }
        
        function limparFormulario() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => checkbox.checked = false);
            
            document.getElementById('resultado').innerHTML = '<div class="text-center py-8 text-gray-400">Marque os crit√©rios presentes para calcular o escore de Wells</div>';
            document.getElementById('probabilidade').classList.add('hidden');
            document.getElementById('conduta').classList.add('hidden');
            document.getElementById('botoesAcao').classList.add('hidden');
        }

        // Fun√ß√£o para copiar resultado
        function copiarResultado() {
            const criteriosMarcados = [];
            if (document.getElementById('sinaisTvp').checked) criteriosMarcados.push('Sinais clinicos de TVP (+3)');
            if (document.getElementById('tepMaisProvavel').checked) criteriosMarcados.push('TEP e o diagnostico mais provavel (+3)');
            if (document.getElementById('taquicardia').checked) criteriosMarcados.push('FC > 100 bpm (+1,5)');
            if (document.getElementById('imobilizacao').checked) criteriosMarcados.push('Imobilizacao >= 3 dias ou cirurgia recente (+1,5)');
            if (document.getElementById('historiaPrevia').checked) criteriosMarcados.push('Historia previa de TVP ou TEP (+1,5)');
            if (document.getElementById('hemoptise').checked) criteriosMarcados.push('Hemoptise (+1)');
            if (document.getElementById('cancer').checked) criteriosMarcados.push('Cancer ativo (+1)');

            const dataHora = new Date().toLocaleString('pt-BR');
            
            const texto = `ESCORE DE WELLS PARA TEP
========================================

Data/Hora: ${dataHora}

CRITERIOS PRESENTES:
${criteriosMarcados.map(c => '‚Ä¢ ' + c).join('\n')}

RESULTADO:
Escore de Wells: ${ultimoPontos.toFixed(1)} pontos
Classificacao: ${ultimaClassificacao}
Prevalencia: ${ultimaPrevalencia}

CONDUTA DIAGNOSTICA:
${ultimoPontos < 2 ? 'Baixa Probabilidade - Solicitar D-dimero' : 
  ultimoPontos <= 6 ? 'Probabilidade Moderada - Solicitar D-dimero' : 
  'Alta Probabilidade - AngioTC direta + Anticoagulacao'}

========================================
Gerado por: Enfermagem Pratica
Site: enfermagempratica.com.br`;

            navigator.clipboard.writeText(texto).then(() => {
                mostrarModal('‚úÖ Resultados copiados com sucesso!', 'success');
            }).catch(err => {
                mostrarModal('‚ùå Erro ao copiar resultados. Tente novamente.', 'error');
            });
        }

        // Fun√ß√£o para exportar PDF
        function exportarPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const criteriosMarcados = [];
            if (document.getElementById('sinaisTvp').checked) criteriosMarcados.push('Sinais clinicos de TVP (+3)');
            if (document.getElementById('tepMaisProvavel').checked) criteriosMarcados.push('TEP e o diagnostico mais provavel (+3)');
            if (document.getElementById('taquicardia').checked) criteriosMarcados.push('FC > 100 bpm (+1,5)');
            if (document.getElementById('imobilizacao').checked) criteriosMarcados.push('Imobilizacao >= 3 dias ou cirurgia recente (+1,5)');
            if (document.getElementById('historiaPrevia').checked) criteriosMarcados.push('Historia previa de TVP ou TEP (+1,5)');
            if (document.getElementById('hemoptise').checked) criteriosMarcados.push('Hemoptise (+1)');
            if (document.getElementById('cancer').checked) criteriosMarcados.push('Cancer ativo (+1)');

            const dataHora = new Date().toLocaleString('pt-BR');
            
            // Cabe√ßalho
            doc.setFillColor(26, 62, 116);
            doc.rect(0, 0, 210, 40, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('ESCORE DE WELLS PARA TEP', 105, 15, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('(Tromboembolismo Pulmonar)', 105, 23, { align: 'center' });
            doc.text('Enfermagem Pratica', 105, 32, { align: 'center' });
            
            // Data
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.text(`Data/Hora: ${dataHora}`, 14, 50);
            
            // Crit√©rios presentes
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('CRITERIOS PRESENTES:', 14, 62);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            let yPos = 70;
            criteriosMarcados.forEach(criterio => {
                doc.text(`‚Ä¢ ${criterio}`, 20, yPos);
                yPos += 6;
            });
            
            // Resultado
            yPos += 8;
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('RESULTADO:', 14, yPos);
            
            yPos += 8;
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text(`Escore de Wells: ${ultimoPontos.toFixed(1)} pontos`, 20, yPos);
            
            yPos += 8;
            const cor = ultimoPontos < 2 ? [16, 185, 129] : ultimoPontos <= 6 ? [234, 179, 8] : [239, 68, 68];
            doc.setTextColor(cor[0], cor[1], cor[2]);
            doc.text(`Classificacao: ${ultimaClassificacao}`, 20, yPos);
            
            yPos += 6;
            doc.setFontSize(10);
            doc.text(`Prevalencia de TEP: ${ultimaPrevalencia}`, 20, yPos);
            
            // Conduta diagn√≥stica
            yPos += 12;
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('CONDUTA DIAGNOSTICA:', 14, yPos);
            
            yPos += 8;
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            
            if (ultimoPontos < 2) {
                doc.text('Baixa Probabilidade:', 20, yPos);
                yPos += 6;
                const condutas = [
                    'Solicitar D-dimero',
                    'Se D-dimero < 500 ng/mL: TEP excluido',
                    'Se D-dimero >= 500 ng/mL: AngioTC torax',
                    'Oxigenoterapia se necessario',
                    'Reavaliacao clinica continua'
                ];
                condutas.forEach(item => {
                    doc.text(`‚Ä¢ ${item}`, 25, yPos);
                    yPos += 5;
                });
            } else if (ultimoPontos <= 6) {
                doc.text('Probabilidade Moderada:', 20, yPos);
                yPos += 6;
                const condutas = [
                    'Solicitar D-dimero',
                    'Se D-dimero positivo: AngioTC torax',
                    'Considerar anticoagulacao empirica se instavel',
                    'Enoxaparina 1mg/kg SC 12/12h',
                    'Monitorizacao continua'
                ];
                condutas.forEach(item => {
                    doc.text(`‚Ä¢ ${item}`, 25, yPos);
                    yPos += 5;
                });
            } else {
                doc.setFont(undefined, 'bold');
                doc.text('Alta Probabilidade - URGENCIA:', 20, yPos);
                doc.setFont(undefined, 'normal');
                yPos += 6;
                const condutas = [
                    'NAO AGUARDAR D-dimero',
                    'INICIAR ANTICOAGULACAO IMEDIATAMENTE',
                    'AngioTC de torax URGENTE',
                    'Heparina ou Enoxaparina',
                    'Se instavel: considerar TROMB√ìLISE'
                ];
                condutas.forEach(item => {
                    doc.text(`‚Ä¢ ${item}`, 25, yPos);
                    yPos += 5;
                });
            }
            
            // Rodap√©
            doc.setFontSize(8);
            doc.setTextColor(128, 128, 128);
            doc.text('Gerado por: Enfermagem Pratica - enfermagempratica.com.br', 105, 285, { align: 'center' });
            doc.text('Este documento e apenas informativo e nao substitui avaliacao medica.', 105, 290, { align: 'center' });
            
            // Salvar PDF
            doc.save(`wells-tep-${Date.now()}.pdf`);
            mostrarModal('‚úÖ PDF gerado com sucesso!', 'success');
        }

        // Fun√ß√£o para mostrar modal
        function mostrarModal(mensagem, tipo) {
            const modal = document.getElementById('feedbackModal');
            const modalContent = document.getElementById('modalContent');
            
            const icone = tipo === 'success' ? '‚úÖ' : '‚ùå';
            const cor = tipo === 'success' ? 'text-green-600' : 'text-red-600';
            
            modalContent.innerHTML = `
                <div class="${cor} text-4xl mb-3">${icone}</div>
                <p class="text-gray-800 font-medium">${mensagem}</p>
            `;
            
            modal.classList.remove('hidden');
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 3000);
        }

        // Fun√ß√£o para fechar modal
        function fecharModal() {
            document.getElementById('feedbackModal').classList.add('hidden');
        }
    </script>
</body>
</html>
